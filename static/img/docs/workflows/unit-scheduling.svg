<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1017px" preserveAspectRatio="none" style="width:474px;height:1017px;background:#FFFFFF;" version="1.1" viewBox="0 0 474 1017" width="474px" zoomAndPan="magnify"><defs/><g><ellipse cx="215.5" cy="20" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><polygon fill="#98FB98" points="180,94,251,94,261,111.5469,251,129.0938,180,129.0938" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="51" x="195" y="116.457">fetch Unit</text><polygon fill="#F1F1F1" points="199.5,149.0938,231.5,149.0938,243.5,161.0938,231.5,173.0938,199.5,173.0938,187.5,161.0938,199.5,149.0938" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="12" x="219.5" y="184.5127">no</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="32" x="199.5" y="165.5947">failed?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="18" x="243.5" y="158.6768">yes</text><ellipse cx="283.5" cy="161.0938" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;fill:none;"/><ellipse cx="283.5" cy="161.0938" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><polygon fill="#98FB98" points="144.5,206.0127,286.5,206.0127,296.5,231.1064,286.5,256.2002,144.5,256.2002" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="122" x="159.5" y="228.4697">list Inhibitor resources</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="96" x="172.5" y="243.5635">matching the Unit</text><polygon fill="#00FFFF" points="153,325.1182,278,325.1182,288,342.665,278,360.2119,153,360.2119" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="105" x="168" y="347.5752">create PipelineRun</text><rect fill="#555555" height="6" rx="2.5" ry="2.5" style="stroke:#555555;stroke-width:1.0;" width="409" x="11" y="380.2119"/><rect fill="#FFC0CB" height="50.1875" style="stroke:#181818;stroke-width:0.5;" width="163" x="23" y="531.3994"/><line style="stroke:#181818;stroke-width:0.5;" x1="28" x2="28" y1="531.3994" y2="581.5869"/><line style="stroke:#181818;stroke-width:0.5;" x1="181" x2="181" y1="531.3994" y2="581.5869"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="135" x="37" y="553.8564">update status.conditions</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="143" x="33" y="568.9502">type=Completed to FALSE</text><rect fill="#FFC0CB" height="50.1875" style="stroke:#181818;stroke-width:0.5;" width="155" x="27" y="616.5869"/><line style="stroke:#181818;stroke-width:0.5;" x1="32" x2="32" y1="616.5869" y2="666.7744"/><line style="stroke:#181818;stroke-width:0.5;" x1="177" x2="177" y1="616.5869" y2="666.7744"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="135" x="37" y="639.0439">update status.conditions</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="124" x="42.5" y="654.1377">type=Pending to TRUE</text><rect fill="#FFFF00" height="35.0938" style="stroke:#181818;stroke-width:0.5;" width="194" x="214" y="406.2119"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="174" x="224" y="428.6689">wait for PipelineRun completion</text><rect fill="#FFC0CB" height="50.1875" style="stroke:#181818;stroke-width:0.5;" width="159" x="231.5" y="461.3057"/><line style="stroke:#181818;stroke-width:0.5;" x1="236.5" x2="236.5" y1="461.3057" y2="511.4932"/><line style="stroke:#181818;stroke-width:0.5;" x1="385.5" x2="385.5" y1="461.3057" y2="511.4932"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="135" x="243.5" y="483.7627">update status.conditions</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="139" x="241.5" y="498.8564">type=Completed to TRUE</text><rect fill="#FFC0CB" height="50.1875" style="stroke:#181818;stroke-width:0.5;" width="155" x="233.5" y="546.4932"/><line style="stroke:#181818;stroke-width:0.5;" x1="238.5" x2="238.5" y1="546.4932" y2="596.6807"/><line style="stroke:#181818;stroke-width:0.5;" x1="383.5" x2="383.5" y1="546.4932" y2="596.6807"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="135" x="243.5" y="568.9502">update status.conditions</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="128" x="247" y="584.0439">type=Pending to FALSE</text><rect fill="#FFC0CB" height="35.0938" style="stroke:#181818;stroke-width:0.5;" width="146" x="238" y="631.6807"/><line style="stroke:#181818;stroke-width:0.5;" x1="243" x2="243" y1="631.6807" y2="666.7744"/><line style="stroke:#181818;stroke-width:0.5;" x1="379" x2="379" y1="631.6807" y2="666.7744"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="126" x="248" y="654.1377">update status.lastState</text><rect fill="#FFC0CB" height="35.0938" style="stroke:#181818;stroke-width:0.5;" width="175" x="223.5" y="686.7744"/><line style="stroke:#181818;stroke-width:0.5;" x1="228.5" x2="228.5" y1="686.7744" y2="721.8682"/><line style="stroke:#181818;stroke-width:0.5;" x1="393.5" x2="393.5" y1="686.7744" y2="721.8682"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="155" x="233.5" y="709.2314">update status.lastStateSeen</text><polygon fill="#00FFFF" points="231,741.8682,391,741.8682,401,759.415,391,776.9619,231,776.9619" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="140" x="246" y="764.3252">publish Kubernetes event</text><rect fill="#555555" height="6" rx="2.5" ry="2.5" style="stroke:#555555;stroke-width:1.0;" width="409" x="11" y="796.9619"/><polygon fill="#F1F1F1" points="138,276.2002,293,276.2002,305,288.2002,293,300.2002,138,300.2002,126,288.2002,138,276.2002" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="12" x="219.5" y="311.6191">no</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="155" x="138" y="292.7012">within an Inhibitor time window?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="18" x="305" y="285.7832">yes</text><polygon fill="#F1F1F1" points="215.5,822.9619,227.5,834.9619,215.5,846.9619,203.5,834.9619,215.5,822.9619" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#FFC0CB" height="35.0938" style="stroke:#181818;stroke-width:0.5;" width="219" x="106" y="866.9619"/><line style="stroke:#181818;stroke-width:0.5;" x1="111" x2="111" y1="866.9619" y2="902.0557"/><line style="stroke:#181818;stroke-width:0.5;" x1="320" x2="320" y1="866.9619" y2="902.0557"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="199" x="116" y="889.4189">get next occurence of spec.schedule</text><rect fill="#FFFF00" height="35.0938" style="stroke:#181818;stroke-width:0.5;" width="144" x="143.5" y="922.0557"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="124" x="153.5" y="944.5127">wait for next occurence</text><polygon fill="#F1F1F1" points="215.5,50,227.5,62,215.5,74,203.5,62,215.5,50" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:1.0;" x1="215.5" x2="215.5" y1="173.0938" y2="206.0127"/><polygon fill="#181818" points="211.5,196.0127,215.5,206.0127,219.5,196.0127,215.5,200.0127" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="243.5" x2="272.5" y1="161.0938" y2="161.0938"/><polygon fill="#181818" points="262.5,157.0938,272.5,161.0938,262.5,165.0938,266.5,161.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="215.5" x2="215.5" y1="129.0938" y2="149.0938"/><polygon fill="#181818" points="211.5,139.0938,215.5,149.0938,219.5,139.0938,215.5,143.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="104.5" x2="104.5" y1="581.5869" y2="616.5869"/><polygon fill="#181818" points="100.5,606.5869,104.5,616.5869,108.5,606.5869,104.5,610.5869" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="311" x2="311" y1="441.3057" y2="461.3057"/><polygon fill="#181818" points="307,451.3057,311,461.3057,315,451.3057,311,455.3057" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="311" x2="311" y1="511.4932" y2="546.4932"/><polygon fill="#181818" points="307,536.4932,311,546.4932,315,536.4932,311,540.4932" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="311" x2="311" y1="596.6807" y2="631.6807"/><polygon fill="#181818" points="307,621.6807,311,631.6807,315,621.6807,311,625.6807" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="311" x2="311" y1="666.7744" y2="686.7744"/><polygon fill="#181818" points="307,676.7744,311,686.7744,315,676.7744,311,680.7744" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="311" x2="311" y1="721.8682" y2="741.8682"/><polygon fill="#181818" points="307,731.8682,311,741.8682,315,731.8682,311,735.8682" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="104.5" x2="104.5" y1="386.2119" y2="531.3994"/><polygon fill="#181818" points="100.5,521.3994,104.5,531.3994,108.5,521.3994,104.5,525.3994" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="311" x2="311" y1="386.2119" y2="406.2119"/><polygon fill="#181818" points="307,396.2119,311,406.2119,315,396.2119,311,400.2119" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="104.5" x2="104.5" y1="666.7744" y2="796.9619"/><polygon fill="#181818" points="100.5,786.9619,104.5,796.9619,108.5,786.9619,104.5,790.9619" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="311" x2="311" y1="776.9619" y2="796.9619"/><polygon fill="#181818" points="307,786.9619,311,796.9619,315,786.9619,311,790.9619" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="215.5" x2="215.5" y1="360.2119" y2="380.2119"/><polygon fill="#181818" points="211.5,370.2119,215.5,380.2119,219.5,370.2119,215.5,374.2119" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="215.5" x2="215.5" y1="300.2002" y2="325.1182"/><polygon fill="#181818" points="211.5,315.1182,215.5,325.1182,219.5,315.1182,215.5,319.1182" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="305" x2="430" y1="288.2002" y2="288.2002"/><polygon fill="#181818" points="426,554.04,430,564.04,434,554.04,430,558.04" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="430" x2="430" y1="288.2002" y2="834.9619"/><line style="stroke:#181818;stroke-width:1.0;" x1="430" x2="227.5" y1="834.9619" y2="834.9619"/><polygon fill="#181818" points="237.5,830.9619,227.5,834.9619,237.5,838.9619,233.5,834.9619" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="215.5" x2="215.5" y1="802.9619" y2="822.9619"/><polygon fill="#181818" points="211.5,812.9619,215.5,822.9619,219.5,812.9619,215.5,816.9619" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="215.5" x2="215.5" y1="256.2002" y2="276.2002"/><polygon fill="#181818" points="211.5,266.2002,215.5,276.2002,219.5,266.2002,215.5,270.2002" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="215.5" x2="215.5" y1="846.9619" y2="866.9619"/><polygon fill="#181818" points="211.5,856.9619,215.5,866.9619,219.5,856.9619,215.5,860.9619" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="215.5" x2="215.5" y1="902.0557" y2="922.0557"/><polygon fill="#181818" points="211.5,912.0557,215.5,922.0557,219.5,912.0557,215.5,916.0557" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="215.5" x2="215.5" y1="74" y2="94"/><polygon fill="#181818" points="211.5,84,215.5,94,219.5,84,215.5,88" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="215.5" x2="215.5" y1="957.1494" y2="1005.1494"/><line style="stroke:#181818;stroke-width:1.0;" x1="215.5" x2="448" y1="1005.1494" y2="1005.1494"/><polygon fill="#181818" points="444,506.0752,448,496.0752,452,506.0752,448,502.0752" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="448" x2="448" y1="62" y2="1005.1494"/><line style="stroke:#181818;stroke-width:1.0;" x1="448" x2="227.5" y1="62" y2="62"/><polygon fill="#181818" points="237.5,58,227.5,62,237.5,66,233.5,62" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="215.5" x2="215.5" y1="30" y2="50"/><polygon fill="#181818" points="211.5,40,215.5,50,219.5,40,215.5,44" style="stroke:#181818;stroke-width:1.0;"/><!--MD5=[9aa6216e75b004f145c732ff0ceae946]
@startuml ../../static/img/docs/workflows/unit-scheduling
skinparam defaultTextAlignment center

start

repeat
  #palegreen:fetch Unit>

  if (failed?) then (yes)
    stop
  else (no)
  endif

  #palegreen:list Inhibitor resources\nmatching the Unit>

  if (within an Inhibitor time window?) then (yes)
  else (no)
    #cyan:create PipelineRun>
    fork
      #pink:update status.conditions\ntype=Completed to FALSE|
      #pink:update status.conditions\ntype=Pending to TRUE|
    fork again
      #yellow:wait for PipelineRun completion]
      #pink:update status.conditions\ntype=Completed to TRUE|
      #pink:update status.conditions\ntype=Pending to FALSE|
      #pink:update status.lastState|
      #pink:update status.lastStateSeen|
      #cyan:publish Kubernetes event>
    end fork
  endif
  #pink:get next occurence of spec.schedule|
  #yellow:wait for next occurence]

@enduml

PlantUML version 1.2022.3(Tue Mar 29 18:10:57 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: fr
Country: FR
--></g></svg>