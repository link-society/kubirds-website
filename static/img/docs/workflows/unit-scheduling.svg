<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="824px" preserveAspectRatio="none" style="width:528px;height:824px;background:#FFFFFF;" version="1.1" viewBox="0 0 528 824" width="528px" zoomAndPan="magnify"><defs/><g><ellipse cx="163.25" cy="20" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="71" x="127.75" y="94"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="51" x="137.75" y="116.457">fetch Unit</text><polygon fill="#F1F1F1" points="147.25,149.0938,179.25,149.0938,191.25,161.0938,179.25,173.0938,147.25,173.0938,135.25,161.0938,147.25,149.0938" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="32" x="147.25" y="165.5947">failed?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="18" x="191.25" y="158.6768">yes</text><ellipse cx="231.25" cy="161.0938" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;fill:none;"/><ellipse cx="231.25" cy="161.0938" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><rect fill="#F1F1F1" height="50.1875" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="142" x="92.25" y="193.0938"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="122" x="102.25" y="215.5508">list Inhibitor resources</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="96" x="115.25" y="230.6445">matching the Unit</text><polygon fill="#F1F1F1" points="85.75,263.2813,240.75,263.2813,252.75,275.2813,240.75,287.2813,85.75,287.2813,73.75,275.2813,85.75,263.2813" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="155" x="85.75" y="279.7822">within an Inhibitor time window?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="18" x="55.75" y="272.8643">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="12" x="252.75" y="272.8643">no</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="11" y="297.2813"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="35" x="21" y="319.7383">ignore</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="225.5" y="297.2813"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="105" x="235.5" y="319.7383">create PipelineRun</text><rect fill="#555555" height="6" rx="2.5" ry="2.5" style="stroke:#555555;stroke-width:1.0;" width="402" x="86" y="352.375"/><rect fill="#F1F1F1" height="50.1875" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="154" x="100" y="476.0625"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="134" x="110" y="498.5195">set condition Completed</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="50" x="152" y="513.6133">to FALSE</text><rect fill="#F1F1F1" height="50.1875" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="139" x="107.5" y="561.25"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="119" x="117.5" y="583.707">set condition Pending</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="46" x="154" y="598.8008">to TRUE</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="194" x="282" y="378.375"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="174" x="292" y="400.832">wait for PipelineRun completion</text><rect fill="#F1F1F1" height="50.1875" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="154" x="302" y="433.4688"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="134" x="312" y="455.9258">set condition Completed</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="46" x="356" y="471.0195">to TRUE</text><rect fill="#F1F1F1" height="50.1875" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="139" x="309.5" y="518.6563"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="119" x="319.5" y="541.1133">set condition Pending</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="50" x="354" y="556.207">to FALSE</text><rect fill="#F1F1F1" height="50.1875" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="158" x="300" y="603.8438"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="105" x="326.5" y="626.3008">set status.lastState</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="138" x="310" y="641.3945">and status.lastStateSeen</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="160" x="299" y="674.0313"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="140" x="309" y="696.4883">publish Kubernetes event</text><rect fill="#555555" height="6" rx="2.5" ry="2.5" style="stroke:#555555;stroke-width:1.0;" width="402" x="86" y="729.125"/><polygon fill="#F1F1F1" points="163.25,741.125,175.25,753.125,163.25,765.125,151.25,753.125,163.25,741.125" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#F1F1F1" points="163.25,50,175.25,62,163.25,74,151.25,62,163.25,50" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#F1F1F1" points="113.25,785.125,213.25,785.125,225.25,798.9609,213.25,812.7969,113.25,812.7969,101.25,798.9609,113.25,785.125" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="81" x="122.75" y="796.5439">interval between</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="100" x="113.25" y="810.3799">executions elapsed?</text><line style="stroke:#181818;stroke-width:1.0;" x1="163.25" x2="163.25" y1="173.0938" y2="193.0938"/><polygon fill="#181818" points="159.25,183.0938,163.25,193.0938,167.25,183.0938,163.25,187.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="191.25" x2="220.25" y1="161.0938" y2="161.0938"/><polygon fill="#181818" points="210.25,157.0938,220.25,161.0938,210.25,165.0938,214.25,161.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="163.25" x2="163.25" y1="129.0938" y2="149.0938"/><polygon fill="#181818" points="159.25,139.0938,163.25,149.0938,167.25,139.0938,163.25,143.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="177" x2="177" y1="526.25" y2="561.25"/><polygon fill="#181818" points="173,551.25,177,561.25,181,551.25,177,555.25" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="379" x2="379" y1="413.4688" y2="433.4688"/><polygon fill="#181818" points="375,423.4688,379,433.4688,383,423.4688,379,427.4688" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="379" x2="379" y1="483.6563" y2="518.6563"/><polygon fill="#181818" points="375,508.6563,379,518.6563,383,508.6563,379,512.6563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="379" x2="379" y1="568.8438" y2="603.8438"/><polygon fill="#181818" points="375,593.8438,379,603.8438,383,593.8438,379,597.8438" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="379" x2="379" y1="654.0313" y2="674.0313"/><polygon fill="#181818" points="375,664.0313,379,674.0313,383,664.0313,379,668.0313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="177" x2="177" y1="358.375" y2="476.0625"/><polygon fill="#181818" points="173,466.0625,177,476.0625,181,466.0625,177,470.0625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="379" x2="379" y1="358.375" y2="378.375"/><polygon fill="#181818" points="375,368.375,379,378.375,383,368.375,379,372.375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="177" x2="177" y1="611.4375" y2="729.125"/><polygon fill="#181818" points="173,719.125,177,729.125,181,719.125,177,723.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="379" x2="379" y1="709.125" y2="729.125"/><polygon fill="#181818" points="375,719.125,379,729.125,383,719.125,379,723.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="288" x2="288" y1="332.375" y2="352.375"/><polygon fill="#181818" points="284,342.375,288,352.375,292,342.375,288,346.375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="73.75" x2="38.5" y1="275.2813" y2="275.2813"/><line style="stroke:#181818;stroke-width:1.0;" x1="38.5" x2="38.5" y1="275.2813" y2="297.2813"/><polygon fill="#181818" points="34.5,287.2813,38.5,297.2813,42.5,287.2813,38.5,291.2813" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="252.75" x2="288" y1="275.2813" y2="275.2813"/><line style="stroke:#181818;stroke-width:1.0;" x1="288" x2="288" y1="275.2813" y2="297.2813"/><polygon fill="#181818" points="284,287.2813,288,297.2813,292,287.2813,288,291.2813" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="38.5" x2="38.5" y1="332.375" y2="753.125"/><line style="stroke:#181818;stroke-width:1.0;" x1="38.5" x2="151.25" y1="753.125" y2="753.125"/><polygon fill="#181818" points="141.25,749.125,151.25,753.125,141.25,757.125,145.25,753.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="288" x2="288" y1="735.125" y2="753.125"/><line style="stroke:#181818;stroke-width:1.0;" x1="288" x2="175.25" y1="753.125" y2="753.125"/><polygon fill="#181818" points="185.25,749.125,175.25,753.125,185.25,757.125,181.25,753.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="163.25" x2="163.25" y1="243.2813" y2="263.2813"/><polygon fill="#181818" points="159.25,253.2813,163.25,263.2813,167.25,253.2813,163.25,257.2813" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="163.25" x2="163.25" y1="74" y2="94"/><polygon fill="#181818" points="159.25,84,163.25,94,167.25,84,163.25,88" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="225.25" x2="502" y1="798.9609" y2="798.9609"/><polygon fill="#181818" points="498,401.4805,502,391.4805,506,401.4805,502,397.4805" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="502" x2="502" y1="62" y2="798.9609"/><line style="stroke:#181818;stroke-width:1.0;" x1="502" x2="175.25" y1="62" y2="62"/><polygon fill="#181818" points="185.25,58,175.25,62,185.25,66,181.25,62" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="163.25" x2="163.25" y1="765.125" y2="785.125"/><polygon fill="#181818" points="159.25,775.125,163.25,785.125,167.25,775.125,163.25,779.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="163.25" x2="163.25" y1="30" y2="50"/><polygon fill="#181818" points="159.25,40,163.25,50,167.25,40,163.25,44" style="stroke:#181818;stroke-width:1.0;"/><!--MD5=[73a5628b070612007f7ade64d5bcf445]
@startuml ../../static/img/docs/workflows/unit-scheduling
skinparam defaultTextAlignment center

start

repeat
  :fetch Unit;

  if (failed?) then (yes)
    stop
  endif

  :list Inhibitor resources\nmatching the Unit;

  if (within an Inhibitor time window?) then (yes)
    :ignore;
  else (no)
    :create PipelineRun;
    fork
      :set condition Completed\nto FALSE;
      :set condition Pending\nto TRUE;
    fork again
      :wait for PipelineRun completion;
      :set condition Completed\nto TRUE;
      :set condition Pending\nto FALSE;
      :set status.lastState\nand status.lastStateSeen;
      :publish Kubernetes event;
    end fork
  endif
repeat while (interval between\nexecutions elapsed?);

@enduml

PlantUML version 1.2022.3(Tue Mar 29 18:10:57 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: fr
Country: FR
--></g></svg>