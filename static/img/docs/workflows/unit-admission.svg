<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="694px" preserveAspectRatio="none" style="width:365px;height:694px;background:#FFFFFF;" version="1.1" viewBox="0 0 365 694" width="365px" zoomAndPan="magnify"><defs/><g><ellipse cx="149" cy="20" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="93" x="102.5" y="94"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="73" x="112.5" y="116.457">Unit changed</text><polygon fill="#F1F1F1" points="85.5,171.3467,212.5,171.3467,224.5,185.1826,212.5,199.0186,85.5,199.0186,73.5,185.1826,85.5,171.3467" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="116" x="91" y="182.7656">ServiceAccount exists?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="127" x="85.5" y="196.6016">Schedule is a valid RRule?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="18" x="55.5" y="182.7656">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="12" x="224.5" y="182.7656">no</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="101" x="13" y="280.4756"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="81" x="23" y="302.9326">Store in Cache</text><rect fill="#F1F1F1" height="65.2813" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="98" x="14.5" y="350.5693"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="78" x="24.5" y="373.0264">Reconciliation</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="21" x="53" y="388.1201">and</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="62" x="32.5" y="403.2139">Scheduling</text><ellipse cx="63.5" cy="461.8506" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;fill:none;"/><ellipse cx="63.5" cy="461.8506" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><polygon fill="#F1F1F1" points="32,209.0186,95,209.0186,107,232.2881,95,255.5576,32,255.5576,20,232.2881,32,209.0186" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="18" x="67.5" y="266.9766">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="63" x="32" y="220.4375">status.phase</text><text fill="#000000" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="9" x="59" y="238.4258">=</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="47" x="40" y="253.1406">Accepted</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="78" x="195.5" y="351.9326"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="58" x="205.5" y="374.3896">do nothing</text><ellipse cx="234.5" cy="433.0264" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;fill:none;"/><ellipse cx="234.5" cy="433.0264" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><polygon fill="#F1F1F1" points="181.5,280.4756,287.5,280.4756,299.5,303.7451,287.5,327.0146,181.5,327.0146,169.5,303.7451,181.5,280.4756" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="18" x="238.5" y="338.4336">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="106" x="181.5" y="291.8945">status.failureReasons</text><text fill="#000000" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="9" x="230" y="309.8828">=</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="98" x="185.5" y="324.5977">new failureReasons</text><polygon fill="#F1F1F1" points="203,209.0186,266,209.0186,278,232.2881,266,255.5576,203,255.5576,191,232.2881,203,209.0186" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="18" x="238.5" y="266.9766">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="63" x="203" y="220.4375">status.phase</text><text fill="#000000" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="9" x="230" y="238.4258">=</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="42" x="213.5" y="253.1406">Rejected</text><polygon fill="#F1F1F1" points="234.5,494.9443,246.5,506.9443,234.5,518.9443,222.5,506.9443,234.5,494.9443" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#F1F1F1" points="149,524.9443,161,536.9443,149,548.9443,137,536.9443,149,524.9443" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#F1F1F1" height="65.2813" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="95" x="101.5" y="568.9443"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="75" x="111.5" y="591.4014">update status</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="21" x="138.5" y="606.4951">and</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="58" x="120" y="621.5889">do nothing</text><polygon fill="#F1F1F1" points="149,50,161,62,149,74,137,62,149,50" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:1.0;" x1="63.5" x2="63.5" y1="315.5693" y2="350.5693"/><polygon fill="#181818" points="59.5,340.5693,63.5,350.5693,67.5,340.5693,63.5,344.5693" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="63.5" x2="63.5" y1="415.8506" y2="450.8506"/><polygon fill="#181818" points="59.5,440.8506,63.5,450.8506,67.5,440.8506,63.5,444.8506" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="63.5" x2="63.5" y1="255.5576" y2="280.4756"/><polygon fill="#181818" points="59.5,270.4756,63.5,280.4756,67.5,270.4756,63.5,274.4756" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="107" x2="124" y1="232.2881" y2="232.2881"/><polygon fill="#181818" points="120,377.0752,124,387.0752,128,377.0752,124,381.0752" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="124" x2="124" y1="232.2881" y2="536.9443"/><line style="stroke:#181818;stroke-width:1.0;" x1="124" x2="137" y1="536.9443" y2="536.9443"/><polygon fill="#181818" points="127,532.9443,137,536.9443,127,540.9443,131,536.9443" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="234.5" x2="234.5" y1="387.0264" y2="422.0264"/><polygon fill="#181818" points="230.5,412.0264,234.5,422.0264,238.5,412.0264,234.5,416.0264" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="234.5" x2="234.5" y1="327.0146" y2="351.9326"/><polygon fill="#181818" points="230.5,341.9326,234.5,351.9326,238.5,341.9326,234.5,345.9326" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="299.5" x2="311.5" y1="303.7451" y2="303.7451"/><polygon fill="#181818" points="307.5,379.3447,311.5,389.3447,315.5,379.3447,311.5,383.3447" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="311.5" x2="311.5" y1="303.7451" y2="474.9443"/><line style="stroke:#181818;stroke-width:1.0;" x1="311.5" x2="234.5" y1="474.9443" y2="474.9443"/><line style="stroke:#181818;stroke-width:1.0;" x1="234.5" x2="234.5" y1="474.9443" y2="494.9443"/><polygon fill="#181818" points="230.5,484.9443,234.5,494.9443,238.5,484.9443,234.5,488.9443" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="234.5" x2="234.5" y1="255.5576" y2="280.4756"/><polygon fill="#181818" points="230.5,270.4756,234.5,280.4756,238.5,270.4756,234.5,274.4756" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="278" x2="321.5" y1="232.2881" y2="232.2881"/><polygon fill="#181818" points="317.5,362.0752,321.5,372.0752,325.5,362.0752,321.5,366.0752" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="321.5" x2="321.5" y1="232.2881" y2="506.9443"/><line style="stroke:#181818;stroke-width:1.0;" x1="321.5" x2="246.5" y1="506.9443" y2="506.9443"/><polygon fill="#181818" points="256.5,502.9443,246.5,506.9443,256.5,510.9443,252.5,506.9443" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="73.5" x2="63.5" y1="185.1826" y2="185.1826"/><line style="stroke:#181818;stroke-width:1.0;" x1="63.5" x2="63.5" y1="185.1826" y2="209.0186"/><polygon fill="#181818" points="59.5,199.0186,63.5,209.0186,67.5,199.0186,63.5,203.0186" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="224.5" x2="234.5" y1="185.1826" y2="185.1826"/><line style="stroke:#181818;stroke-width:1.0;" x1="234.5" x2="234.5" y1="185.1826" y2="209.0186"/><polygon fill="#181818" points="230.5,199.0186,234.5,209.0186,238.5,199.0186,234.5,203.0186" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="234.5" x2="234.5" y1="518.9443" y2="536.9443"/><line style="stroke:#181818;stroke-width:1.0;" x1="234.5" x2="161" y1="536.9443" y2="536.9443"/><polygon fill="#181818" points="171,532.9443,161,536.9443,171,540.9443,167,536.9443" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="149" x2="149" y1="129.0938" y2="171.3467"/><polygon fill="#181818" points="145,161.3467,149,171.3467,153,161.3467,149,165.3467" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="117" x="153" y="151.4297">ADDED, MODIFIED event</text><line style="stroke:#181818;stroke-width:1.0;" x1="149" x2="149" y1="548.9443" y2="568.9443"/><polygon fill="#181818" points="145,558.9443,149,568.9443,153,558.9443,149,562.9443" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="149" x2="149" y1="74" y2="94"/><polygon fill="#181818" points="145,84,149,94,153,84,149,88" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="149" x2="149" y1="634.2256" y2="682.2256"/><line style="stroke:#181818;stroke-width:1.0;" x1="149" x2="339.5" y1="682.2256" y2="682.2256"/><polygon fill="#181818" points="335.5,374.7803,339.5,364.7803,343.5,374.7803,339.5,370.7803" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="339.5" x2="339.5" y1="62" y2="682.2256"/><line style="stroke:#181818;stroke-width:1.0;" x1="339.5" x2="161" y1="62" y2="62"/><polygon fill="#181818" points="171,58,161,62,171,66,167,62" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="149" x2="149" y1="30" y2="50"/><polygon fill="#181818" points="145,40,149,50,153,40,149,44" style="stroke:#181818;stroke-width:1.0;"/><!--MD5=[09e0eed76f490826ae27ac299a4103de]
@startuml ../../static/img/docs/workflows/unit-admission
skinparam defaultTextAlignment center

start

repeat
  :Unit changed;
  ->ADDED, MODIFIED event;
  if (ServiceAccount exists?\nSchedule is a valid RRule?) then (yes)
    if (status.phase\n==\nAccepted) then (yes)
      :Store in Cache;
      :Reconciliation\nand\nScheduling;
      stop
    endif
  else (no)
    if (status.phase\n==\nRejected) then (yes)
      if (status.failureReasons\n==\nnew failureReasons) then (yes)
        :do nothing;
        stop
      endif
    endif
  endif
  :update status\nand\ndo nothing;


@enduml

PlantUML version 1.2022.3(Tue Mar 29 18:10:57 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: fr
Country: FR
--></g></svg>